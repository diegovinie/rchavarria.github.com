<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: apache | R. Chavarria's Blog]]></title>
  <link href="http://rchavarria.github.io/blog/categories/apache/atom.xml" rel="self"/>
  <link href="http://rchavarria.github.io/"/>
  <updated>2013-09-29T16:17:03+02:00</updated>
  <id>http://rchavarria.github.io/</id>
  <author>
    <name><![CDATA[Rub&eacute;n Chavarr&iacute;a]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Uso de JPA, hibernate y derby]]></title>
    <link href="http://rchavarria.github.io/blog/2011/05/19/uso-de-jpa-hibernate-y-derby/"/>
    <updated>2011-05-19T09:44:00+02:00</updated>
    <id>http://rchavarria.github.io/blog/2011/05/19/uso-de-jpa-hibernate-y-derby</id>
    <content type="html"><![CDATA[<div style="margin:2%; padding:2%; background-color:#E0E0E0; ">
  <p>Este post pertenece a mi antiguo blog en <a href="http://rchavarria.wordpress.com">wordpress</a>, pero decidí pasarme a github:pages por las siguientes <a href="http://rchavarria.github.io/blog/2012/12/03/por-que-cambie-mi-blog-en-wordpress-com">razones</a></p>
</div>


<p>Tengo una pequeña aplicación en la que uso Apache Derby como base de datos para guardar los datos.</p>

<p>Hasta ahora, estaba utilizando el patrón DAO para guardar los datos que quería hacer persistentes en la aplicación. Cada clase DAO se encargaba de crear, borrar, editar y actualizar un tipo de datos. Estas operaciones las hacía mediante SQL puro y duro. No es que el modelo de datos que utilizo sea muy complicado, pero es tedioso editar consultas SQL para cada tipo de dato que quieres persistir.</p>

<p>Así pues, decidí que debería utilizar algo un poco más elaborado. Java dispone de la Java Persistence API, así que, ¿porqué no usarla? Y este post describe los primeros pasos a dar para utilizar JPA en una aplicación.</p>

<!-- more -->


<p>JPA es una definición, por sí sola no hace nada, necesita de una implementación para realizar realmente el trabajo. Existen varias implementaciones (ver <a title="Comparativa implementaciones JPA" href="http://terrazadearavaca.blogspot.com/2008/12/jpa-implementations-comparison.html">comparativa</a>). De todas ellas he elegido Hibernate. Puede que no sea la mejor, puede que no sea la más rápida o la más eficiente, pero creo que es la más conocida y la referencia para el resto de implementaciones.</p>

<h2>El ejemplo, paso a paso</h2>


<p>Nuestro ejemplo va a consistir en algo muy (pero que muy) sencillo, pero que nos va a permitir aprender cómo configurar hibernate con nuestra base de datos derby. Nuestros datos a guardar van a ser objetos de la clase Person, que va a tener un nombre. No va a haber relaciones con ningún otro objeto, así que sólo exisitirá una tabla en la base de datos. Más sencillo, imposible.</p>

<h3>Datos que serán persistentes</h3>


<p>Como ya hemos visto, sólo vamos a persistir objetos de la clase Person, la cual tendrá un campo id, que funcionará como la clave principal de la tabla, y un campo name, el nombre de la persona. A continuación vemos el código de esta clase:</p>

<p>``` java
package es.rct.jpa.model;</p>

<p>import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;</p>

<p>@Entity
public class Person {</p>

<pre><code>@Id
@GeneratedValue
private long id;
private String name;

public void setName(final String name) {this.name = name;}
public String getName() {return name;}
public void setId(final long id) {this.id = id;}
public long getId() {return id;}
</code></pre>

<p>}
```</p>

<p>De esta clase vamos a destacar 3 anotaciones, pertenecientes a JPA. Las podemos encontrar en el paquete javax.persistence:</p>

<ul>
    <li>Entity: indica que esta clase es una entidad, lo cual significa que esta clase tiene correspondencia con una tabla en la base de datos.</li>
    <li>Id: indica qué campo de la clase va a ser utilizado como clave primaria de la tabla representada por la entidad.</li>
    <li>GeneratedValue: indica que la clave va a ser generada automáticamente por el motor de persistencia (hibernate)</li>
</ul>




<h3>Dependencias de Maven</h3>


<p>Para poder usar Derby como base de datos y Hibernate como implementación de JPA, debemos incluir las siguientes dependencias en nuestro fichero pom.xml de configuración de maven:</p>

<p>``` xml</p>

<!-- ... -->


<p><dependency></p>

<pre><code>&lt;groupId&gt;org.apache.derby&lt;/groupId&gt;
&lt;artifactId&gt;derby&lt;/artifactId&gt;
&lt;version&gt;10.6.2.1&lt;/version&gt;
&lt;type&gt;jar&lt;/type&gt;
&lt;scope&gt;compile&lt;/scope&gt;
</code></pre>

<p></dependency>
<dependency></p>

<pre><code>&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;
&lt;version&gt;3.4.0.GA&lt;/version&gt;
&lt;type&gt;jar&lt;/type&gt;
&lt;scope&gt;compile&lt;/scope&gt;
</code></pre>

<p></dependency></p>

<!-- ... -->


<p>```</p>

<p>Las versiones de las dependencias pueden variar. Aquí aparecen las que yo personalmente he utilizado.</p>

<h3>Configurar JPA / Hibernate / Derby</h3>


<p>Para configurar JPA, debemos escribir la configuracion en un fichero llamado persistence.xml,
en un directory META-INF, accesible desde el directorio de trabajo de nuestra aplicación.
Yo lo he creado en src/main/resources/META-INF/persistence.xml, ya que maven empaqueta el
contenido del directorio src/main/resources en el jar de la aplicación, con lo que tenemos
el resultado deseado.</p>

<p>El contenido del fichero de configuración JPA es el siguiente:</p>

<p>``` xml
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0"></p>

<pre><code>&lt;persistence-unit name="test-jpa" transaction-type="RESOURCE_LOCAL"&gt;

&lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;

&lt;class&gt;es.rct.jpa.model.Person&lt;/class&gt;
&lt;exclude-unlisted-classes&gt;true&lt;/exclude-unlisted-classes&gt;

&lt;properties&gt;
    &lt;property name="hibernate.connection.url" value="jdbc:derby:memory:testing-jpa;create=true" /&gt;
    &lt;property name="hibernate.connection.driver_class" value="org.apache.derby.jdbc.EmbeddedDriver" /&gt;
    &lt;property name="hibernate.dialect" value="org.hibernate.dialect.DerbyDialect" /&gt;
    &lt;property name="hibernate.hbm2ddl.auto" value="create" /&gt;
    &lt;property name="hibernate.connection.username" value="" /&gt;
    &lt;property name="hibernate.connection.password" value="" /&gt;
&lt;/properties&gt;

&lt;/persistence-unit&gt;
</code></pre>

<p></persistence>
```</p>

<p>De este fichero xml podemos destacar las siguientes etiquetas:</p>

<ul>
    <li>persistence-unit, atributo name: define una unidad de persistencia, es obligatorio darle un nombre, para poder crear un EntityManager en nuestra aplicación. El EntityManager es el encargado de manejar la persistencia de nuestros datos.</li>
    <li>provider: aquí indicamos que queremos usar Hibernate como implementación de JPA</li>
    <li>class: debe existir una etiqueta class por cada clase que queramos persistir, es decir, una por cada entidad que formará nuestra unidad de persistencia.</li>
    <li>Dentro de las etiquetas properties, definimos propiedades propietarias de la implementación JPA. De entre ellas cabe destacar:</li>
</ul>


<ol>
    <li>hibernate.connection.url: define la URL de conexión a la base de datos. Aquí estamos configurando Derby como base de datos. Estamos creando una base de datos llamada "testing-jpa" en memoria (no en disco).</li>
    <li>hibernate.dialect: configuramos Hibernate para que "hable" con Derby</li>
</ol>




<h3>Crear un test para probar el funcionamiento</h3>


<p>Ahora sólo queda crear nuestro código para almacenar algunos objetos del tipo Person.</p>

<p>Primero, debemos crear un objeto EntityManager, que manejará todo lo relacionado con la persistencia: transacciones, guardar datos, actualizarlos, borrarlos, etc.</p>

<p><code>java
EntityManagerFactory emf = Persistence.createEntityManagerFactory("test-jpa");
EntityManager em = emf.createEntityManager();
</code></p>

<p>Una vez terminemos de utilizar nuestro EntityManager, debemos cerrarlo:</p>

<p><code>java
em.close();
emf.close();
</code></p>

<p>Ahora ya disponemos de un objeto "em" para poder persistir objetos de tipo Person:</p>

<p>``` java
private void insertSomeData() {</p>

<pre><code>Person p = new Person();
p.setName("person 01");
Person p1 = new Person();
p1.setName("person 02");

em.getTransaction().begin();
em.persist(p);
em.persist(p1);
em.getTransaction().commit();
</code></pre>

<p>}
```</p>

<p>Para poder guardar los datos en base de datos, debemos arrancar una transacción, llamar al método "persist" y terminar la transacción. Si queremos indicar que ha habido un error durante la transacción, y no queremos llevarla a cabo, llamaríamos al método "rollback" en lugar del método "commit".</p>

<p>Para comprobar que realmente hemos almacenado los objetos en la base de datos, sólo tenemos que buscarlos por identificador. Ya que sólo hemos almacenado 2 objetos, y son los 2 primeros, los ids serán 1 y 2 respectivamente:</p>

<p>``` java
private void listInsertedData() {</p>

<pre><code>em.getTransaction().begin();
for (long i = 1; i &lt;= 2; i++) {
    Person pFinded = em.find(Person.class, new Long(i));
    System.out.println("Id: " + i + ", name: " + pFinded.getName());
}
em.getTransaction().commit();
</code></pre>

<p>}
```</p>

<h2>Código fuente del ejemplo</h2>


<p>Puedes descargar/ver el código fuente en este repositorio de github: <a title="Repositorio github con la solucion" href="https://github.com/rchavarria/JPAHibernateDerby">https://github.com/rchavarria/JPAHibernateDerby</a></p>

<h2>Referencias</h2>


<p>Si quieres profundizar en el tema, aquí dejo unos enlaces que me han sido de gran ayuda.</p>

<ol>
<li>
<a href="http://www.davidmarco.es/blog/entrada.php?id=144">Excelente tutorial de JPA</a>
</li>
<li>
<a href="http://wiki.apache.org/db-derby/InMemoryBackEndPrimer">Configuración de Derby para trabajar en memoria</a>
</li>
<li>
<a href="http://eskatos.wordpress.com/2009/10/26/unit-test-jpa-entities-with-in-memory-derby">Configuración de JPA para usar Hibernate</a>
</li>
<li>
<a href="http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html_single/#architecture-javase">Hibernate en entornos JavaSE</a>
</li>
<li>
<a href="http://terrazadearavaca.blogspot.com/2008/12/jpa-implementations-comparison.html">Comparativa de implementaciones de JPA</a>
</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Usar apache derby como base de datos]]></title>
    <link href="http://rchavarria.github.io/blog/2010/06/24/usar-apache-derby-como-base-de-datos/"/>
    <updated>2010-06-24T09:44:00+02:00</updated>
    <id>http://rchavarria.github.io/blog/2010/06/24/usar-apache-derby-como-base-de-datos</id>
    <content type="html"><![CDATA[<div style="margin:2%; padding:2%; background-color:#E0E0E0; ">
  <p>Este post pertenece a mi antiguo blog en <a href="http://rchavarria.wordpress.com">wordpress</a>, pero decidí pasarme a github:pages por las siguientes <a href="http://rchavarria.github.io/blog/2012/12/03/por-que-cambie-mi-blog-en-wordpress-com">razones</a></p>
</div>


<p>En este post vamos a aprender a usar <a href="http://db.apache.org/derby/">Apache Derby</a> como base de datos para nuestra aplicación Java. Seguiremos paso por paso un ejemplo de uso muy sencillo.</p>

<!-- more -->




<h2>Instalación</h2>


<p>Lo primero que deberemos hacer es descargar la última versión de Apache Derby: <a href="http://db.apache.org/derby/derby_downloads.html">página de descarga</a>. La descarga recomendada sería la distribución binaria, que incluye las librerías, documentación y herramientas de ayuda.</p>

<p>Acto seguido descomprimimos la distribución a un directorio de nuestra elección, por ejemplo:</p>

<pre>C:\Archivos de programa\Java\derby-10.6
</pre>


<p>Para poder usar derby, deberemos configurar nuestro entorno, es decir, deberemos establecer ciertas variables de entorno con los valores adecuados para poder ejecutar derby en nuestro PC. Suponiendo que vamos a usar Windows como sistema operativo, deberemos establecer las siguientes variables de entorno:</p>

<pre>set DERBY_HOME=C:\Archivos de programa\Java\derby-10.6
set PATH=%DERBY_HOME%\bin;%PATH%
</pre>


<p>De esta forma conseguiremos tener accesibles los ejecutables de las herramientas proporcionadas por derby.</p>

<p>A partir de ahora, para poder utilizar derby en nuestros programas Java, sólo será necesario tener accesible la librería <em>derby.jar</em> en el classpath de nuestro programa.</p>

<h2>Código de ejemplo</h2>


<p>De acuerdo, ya sabemos lo que tenemos que hacer para poder usar derby. Pero, ¿cómo lo usamos?. A continuación vamos a estudiar varios fragmentos de código que nos permitirán crear una base de datos, crear una sencilla tabla en nuestra base de datos, insertar datos y realizar consultas. Para ello se presupone un conocimiento básico de lenguaje SQL. Si quieres aprender un poco más sobre él puedes aprender un poco en <a href="http://www.w3schools.com/sql/">SQL Tutorial de W3C</a>.</p>

<h3>Crear una base de datos</h3>


<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Crear una base de datos programáticamente </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>import java.sql.Connection;
</span><span class='line'>import java.sql.DriverManager;
</span><span class='line'>import java.sql.Statement;&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>public class CreateDataBase {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>  public static void main(String[] args) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>String driver = &amp;quot;org.apache.derby.jdbc.EmbeddedDriver&amp;quot;;
</span><span class='line'>String dbName = &amp;quot;/DerbyDB/ExampleDB&amp;quot;;
</span><span class='line'>String dbParam = &amp;quot;create=true&amp;quot;; //la base de datos se creará si no existe todavía
</span><span class='line'>String connectionURL = &amp;quot;jdbc:derby:&amp;quot; + dbName + &amp;quot;;&amp;quot; + dbParam;
</span><span class='line'>Connection conn = null;
</span><span class='line'>
</span><span class='line'>try{
</span><span class='line'>  Class.forName(driver);
</span><span class='line'>} catch(java.lang.ClassNotFoundException e) {
</span><span class='line'>  e.printStackTrace();
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>try {
</span><span class='line'>  conn = DriverManager.getConnection(connectionURL);
</span><span class='line'>
</span><span class='line'>  Statement st = conn.createStatement();
</span><span class='line'>  String sqlCreateTableUsers =
</span><span class='line'>         &amp;quot;CREATE TABLE users ( &amp;quot; +
</span><span class='line'>         &amp;quot;FirstName VARCHAR(20) NOT NULL, &amp;quot; +
</span><span class='line'>         &amp;quot;LastName VARCHAR(20) NOT NULL, &amp;quot; +
</span><span class='line'>         &amp;quot;idUser INTEGER NOT NULL CONSTRAINT idUser_PK PRIMARY KEY &amp;quot; +
</span><span class='line'>         &amp;quot;)&amp;quot;;
</span><span class='line'>  // la sentencia SQL crea una tabla con 3 campos
</span><span class='line'>  st.execute(sqlCreateTableUsers);
</span><span class='line'>
</span><span class='line'>  System.out.println(&amp;quot;La base de datos '&amp;quot; + dbName + &amp;quot;' se ha creado correctamente&amp;quot;);
</span><span class='line'>}  catch (Throwable e)  {
</span><span class='line'>  System.out.println(&amp;quot;Error al crear la base de datos '&amp;quot; + dbName + &amp;quot;'&amp;quot;);
</span><span class='line'>  e.printStackTrace();
</span><span class='line'>} finally {
</span><span class='line'>  try { conn.close(); }
</span><span class='line'>  catch (Throwable t){}
</span><span class='line'>}
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Para ejecutar scripts SQL y realizar otras consultas, derby proporciona la herramienta <em>ij</em>, el uso de la cual lo podemos aprender de la siguiente guía: <a href="http://db.apache.org/derby/docs/10.6/getstart/">getting started with derby 10.6 (inglés)</a>.
Como el nombre de la base de datos es <em>/DerbyDB/ExampleDB</em>, la base de datos será creada en el directorio</p>

<pre>C:\DerbyDB\ExampleDB</pre>


<h3>Insertar datos</h3>


<p>Con el siguiente código seremos capaces de introducir datos en nuestra tabla:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Insertar datos </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>String driver = &quot;org.apache.derby.jdbc.EmbeddedDriver&quot;;
</span><span class='line'>String dbName = &quot;/DerbyDB/ExampleDB&quot;;
</span><span class='line'>String connectionURL = &quot;jdbc:derby:&quot; + dbName;
</span><span class='line'>Connection conn = null;&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>try{
</span><span class='line'>  Class.forName(driver);
</span><span class='line'>} catch(java.lang.ClassNotFoundException e) {
</span><span class='line'>  e.printStackTrace();
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>try {
</span><span class='line'>  conn = DriverManager.getConnection(connectionURL);&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>  Statement st = conn.createStatement();
</span><span class='line'>  st.executeUpdate(&quot;INSERT INTO users VALUES('Jose', 'Olmedo', 1)&quot;);
</span><span class='line'>  st.executeUpdate(&quot;INSERT INTO users VALUES('Maria', 'Hoz', 2)&quot;);&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>  System.out.println(&quot;Se han insertado dos registros&quot;);
</span><span class='line'>} catch (Throwable e)  {
</span><span class='line'>  System.out.println(&quot;Ha fallado la insercion de dos registros&quot;);
</span><span class='line'>  e.printStackTrace();
</span><span class='line'>} finally {
</span><span class='line'>  try { conn.close(); }
</span><span class='line'>  catch (Throwable t){}
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>Realizar consultas</h3>


<p>Con el siguiente código, realizamos una consulta a nuestra tabla y mostramos por consola la información en ella almacenada:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Realizar consultas </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>String driver = &quot;org.apache.derby.jdbc.EmbeddedDriver&quot;;
</span><span class='line'>String dbName = &quot;/DerbyDB/ExampleDB&quot;;
</span><span class='line'>String connectionURL = &quot;jdbc:derby:&quot; + dbName;
</span><span class='line'>Connection conn = null;&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>try{
</span><span class='line'>  Class.forName(driver);
</span><span class='line'>} catch(java.lang.ClassNotFoundException e) {
</span><span class='line'>  e.printStackTrace();
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>try {
</span><span class='line'>  conn = DriverManager.getConnection(connectionURL);&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>  Statement st = conn.createStatement();
</span><span class='line'>  ResultSet rs=st.executeQuery(&quot;SELECT * FROM users&quot;);
</span><span class='line'>  while (rs.next()){&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>Integer idUser = rs.getInt(&amp;quot;idUser&amp;quot;);
</span><span class='line'>String first = rs.getString(&amp;quot;FirstName&amp;quot;);
</span><span class='line'>String last = rs.getString(&amp;quot;LastName&amp;quot;);
</span><span class='line'>System.out.println(idUser + &amp;quot; se llama: &amp;quot; + first + &amp;quot; &amp;quot; + last);
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>  rs.close();
</span><span class='line'>} catch (Throwable e)  {
</span><span class='line'>  System.out.println(&quot;Ha fallado la consulta de datos&quot;);
</span><span class='line'>  e.printStackTrace();
</span><span class='line'>} finally {
</span><span class='line'>  try { conn.close(); }
</span><span class='line'>  catch (Throwable t){}
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Espero que este post os sirva para poder utilizar derby como base de datos.</p>

<div id="_mcePaste" style="overflow:hidden;position:absolute;left:-10000px;top:1232px;width:1px;height:1px;"><!--[if gte mso 9]&gt;  Normal 0 21   false false false        MicrosoftInternetExplorer4  &lt;![endif]--><!--[if gte mso 9]&gt;   &lt;![endif]--><!--  /* Style Definitions */  p.MsoNormal, li.MsoNormal, div.MsoNormal  {mso-style-parent:"";   margin:0cm;   margin-bottom:.0001pt;  mso-pagination:widow-orphan;  font-size:12.0pt;   font-family:"Times New Roman";  mso-fareast-font-family:"Times New Roman";} a:link, span.MsoHyperlink   {color:blue;  text-decoration:underline;  text-underline:single;} a:visited, span.MsoHyperlinkFollowed  {color:purple;  text-decoration:underline;  text-underline:single;} @page Section1  {size:612.0pt 792.0pt;  margin:70.85pt 3.0cm 70.85pt 3.0cm;   mso-header-margin:36.0pt;   mso-footer-margin:36.0pt;   mso-paper-source:0;} div.Section1   {page:Section1;} --><!--[if gte mso 10]&gt; &lt;!   /* Style Definitions */  table.MsoNormalTable   {mso-style-name:&quot;Tabla normal&quot;;   mso-tstyle-rowband-size:0;  mso-tstyle-colband-size:0;  mso-style-noshow:yes;   mso-style-parent:&quot;&quot;;  mso-padding-alt:0cm 5.4pt 0cm 5.4pt;  mso-para-margin:0cm;  mso-para-margin-bottom:.0001pt;   mso-pagination:widow-orphan;  font-size:10.0pt;   font-family:&quot;Times New Roman&quot;;  mso-ansi-language:#0400;  mso-fareast-language:#0400;   mso-bidi-language:#0400;} --> <!--[endif]-->
<p class="MsoNormal">Para ejecutar scripts sql y realizar otras consultas contra una bbdd derby, existe la herramienta ij. El uso de esta herramienta lo podemos aprender de la siguiente guía: <a href="http://db.apache.org/derby/docs/10.6/getstart/">getting started with derby 10.6 (ingles)</a>.</p>

</div>

]]></content>
  </entry>
  
</feed>
