<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: dart | R. Chavarria's Blog]]></title>
  <link href="http://rchavarria.github.io/blog/categories/dart/atom.xml" rel="self"/>
  <link href="http://rchavarria.github.io/"/>
  <updated>2015-01-02T10:30:42+01:00</updated>
  <id>http://rchavarria.github.io/</id>
  <author>
    <name><![CDATA[Rub&eacute;n Chavarr&iacute;a]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Crear Web Components con Dart y Polymer]]></title>
    <link href="http://rchavarria.github.io/blog/2014/12/13/crear-web-components-con-dart-y-polymer/"/>
    <updated>2014-12-13T18:42:00+01:00</updated>
    <id>http://rchavarria.github.io/blog/2014/12/13/crear-web-components-con-dart-y-polymer</id>
    <content type="html"><![CDATA[<p><a href="http://dartlang.org">Dart</a> es un lenguaje de programación, no muy conocido hoy en día, pero
que tiene un gran potencial, ya que está pensado para aplicaciones
web, tanto para la parte servidora como para la parte cliente. Así,
con Dart puedes escribir código que se ejecuta en el navegador y
código ejecutándose en un servidor que responda a ese cliente.</p>

<p><a href="http://polymer-project.org">Polymer</a> es una implementación del estándar HTML Web Components,
un estándar que quiere revolucionar la manera en la que se desarrollan
aplicaciones web en los navegadores.</p>

<p>En este tutorial describo lo que he aprendido siguiendo el tutorial acerca
de <a href="https://www.dartlang.org/docs/tutorials/polymer-intro/">Cómo crear un Web Component con Dart y Polymer</a>. Si quieres bucear
en el código directamente, puedes hacerlo en mi repositorio de Github
<a href="https://github.com/rchavarria/dart-tutorials/tree/master/custom-element-dart-tutorial">Custom element Dart tutorial</a>.</p>

<!-- more -->


<h2>Qué vamos a crear</h2>

<p>El Web Component que crearemos con este tutorial es un sencillo cronómetro,
con el cual podremos comenzar a contar el tiempo, pausarlo o detenerlo completamente.</p>

<p>Rápidamente, los pasos que vamos a seguir son:</p>

<ol>
<li>Importar el fichero HTML que contiene la definición del Web Component</li>
<li>Usar el Web Component en nuestra propia página web</li>
<li>Inicializar Polymer. La librería de Dart que vamos a usar ya proporciona
el mecanismo para hacerlo, no te preocupes</li>
</ol>


<h2>Ficheros de los que consta el tutorial</h2>

<ul>
<li><code>web/index.html</code>: es el punto de entrada de la aplicación. Inicializa Polymer,
importa el Web Component y usa el mismo.</li>
<li><code>web/tute_stopwatch.html</code>: código HTML que define el Web Component.
importa el Web Component y usa el mismo.</li>
<li><code>web/tute_stopwatch.dart</code>: código Dart que implementa el Web Component.</li>
</ul>


<h2>Instalando Polymer.dart</h2>

<p>Para poder usar Polymer, primero es necesario instalarlo como una dependencia del
proyecto. Para ello, modificar el fichero <code>pubspec.yaml</code> y añadir el siguiente
contenido:</p>

<p><code>
dependencies:
  polymer: "&gt;=0.15.1 &lt;0.16.0"
</code></p>

<p>Después, ejecutar el comando <code>pub get</code>. <code>pub</code> es una herramienta que viene con el
SDK de Dart. Dart Editor también puede ejecutar este comando para instalar todas
las dependencias del proyecto.</p>

<p>Para inicializar Polymer, modificar <code>web/index.html</code> y añadir esta línea al final
del mismo:</p>

<p>``` html
...</p>

<script type="application/dart">export "package:polymer/init.dart";</script>


<p>...
```</p>

<h2>Incluir Polymer en la aplicación</h2>

<p>Estos son los ficheros a modificar para usar Polymer en la creación del
Web Component:</p>

<p><code>web/tute_stopwatch.html</code>: importar el fichero <code>packages/polymer/polymer.html</code>
antes de definir cualquier Web Component en la aplicación:</p>

<p><code>html
&lt;link rel="import" href="packages/polymer/polymer.html"&gt;
&lt;polymer-element name="tute-stopwatch"&gt;
</code></p>

<p><code>web/tute_stopwatch.dart</code>: importar la librería Polymer en el fichero Dart:</p>

<p><code>
import 'dart:html';
import 'package:polymer/polymer.dart';
// ...
</code></p>

<h2>Instanciar un Web Component</h2>

<p>En la página web donde se va a usar el Web Component, debemos importar la definición
del mismo, usar un tag con su nombre (como si fuera un componente HTML normal) e
inicializar Polymer. De forma que <code>web/index.html</code> quedaría parecido a:</p>

<p>``` html
&lt;!DOCTYPE html>
<html>
  <head></p>

<pre><code>&lt;!-- importa la definición del Web Component --&gt;
&lt;link rel="import" href="tute_stopwatch.html"&gt;
</code></pre>

<p>  </head></p>

<p>  <body></p>

<pre><code>&lt;!-- usa el Web Component --&gt;
&lt;tute-stopwatch&gt;&lt;/tute-stopwatch&gt;

&lt;!-- inicializa Polymer --&gt;
&lt;script type="application/dart"&gt;export "package:polymer/init.dart";&lt;/script&gt;
</code></pre>

<p>  </body>
</html>
```</p>

<h2>Definiendo el Web Component</h2>

<p>La definición del mismo está en el fichero <code>web/tute_stopwatch.html</code>. Para definirlo
hay que usar el tag <code>&lt;polymer-element&gt;</code> y asignar un nombre al Web Component. En
este caso <code>tute-stopwatch</code>.</p>

<p>El tag <code>&lt;polymer-element&gt;</code> puede tener dos tags hijos: <code>&lt;template&gt;</code>, que contiene
el código HTML; y <code>&lt;script&gt;</code>, que contiene el código Dart.</p>

<p>``` html
<polymer-element name="tute-stopwatch">
  <template></p>

<pre><code>...
</code></pre>

<p>  </template>
  <script type="application/dart" src="tute_stopwatch.dart"></script>
</polymer-element>
```</p>

<h2>Dando comportamiento al Web Component</h2>

<p>El comportamiento es implementado en Dart, en el fichero <code>web/tute_stopwatch.dart</code>.
En este fichero, se declara una clase que extiende de <code>PolymerElement</code> y está
anotada con <code>@CustomTag</code>. El contenido de <code>@CustomTag</code> debe coincidir con el
nombre dado en la definición del Web Component.</p>

<p>```
@CustomTag('tute-stopwatch')
class TuteStopwatch extends PolymerElement {</p>

<pre><code>TuteStopwatch.created() : super.created();
</code></pre>

<p>}
```</p>

<p>Para que todo esté correcto, la clase <code>TuteStopwatch</code> debe heredar de <code>PolymerElement</code> o
implementar las interfaces <code>Polymer</code> y <code>Observable</code>. Además, debe definir un
constructor <em>nombrado</em> que llame a <code>super.created()</code>.</p>

<h2>Enlazando datos entre Dart y HTML</h2>

<p>En la parte visual (HTML) se pueden usar las llaves dobles <code>{{...}}</code> para utilizar una
variable anotada como <code>@observable</code> en la parte de comportamiento (Dart). Por ejemplo,
para usar una <code>String</code> que al modificarla en Dart se actualice la vista HTML, los
ficheros <code>web/tute_stopwatch.html</code> y <code>web/tute_stopwatch.dart</code> quedarían:</p>

<p>``` html
<polymer-element name="tute-stopwatch">
  <template></p>

<pre><code>&lt;div&gt;{{counter}}&lt;/div&gt;
</code></pre>

<p>  </template>
  ...
</polymer-element>
```</p>

<p>```
@CustomTag('tute-stopwatch')
class TuteStopwatch extends PolymerElement {</p>

<pre><code>...
@observable String counter;

void aMethod() {
    counter = '14:59';
}
</code></pre>

<p>}
```</p>

<p>Para hacer un doble enlace, de Dart a HTML y viceversa, se puede consultar en enlace
<a href="https://www.dartlang.org/docs/tutorials/forms/#binding-data">Two-way data binding using Polymer</a>.</p>

<h2>Creando manejadores de eventos</h2>

<p>De la misma forma que se puede enlazar variables, se pueden enlazar manejadores de
eventos que gestionen las interacciones del usuario. Por ejemplo, para responder
ante un click del usuario, en HTML:</p>

<p><code>html
&lt;button on-click="{{start}}"&gt;Start&lt;/button&gt;
</code></p>

<p>Mientras que en Dart:</p>

<p>```
@CustomTag('tute-stopwatch')
class TuteStopwatch extends PolymerElement {</p>

<pre><code>...
void start(Event evt, var detail, Node target) {
    ...
}
</code></pre>

<p>}
```</p>

<p>Donde:</p>

<ul>
<li><code>evt</code>: contiene información sobre el evento</li>
<li><code>detail</code>: puede proveer información adicional sobre el evento</li>
<li><code>target</code>: el nodo HTML que lanzó el evento</li>
</ul>


<p>Para más información, como los manejadores de eventos disponibles y más, consultar
<a href="http://www.polymer-project.org/polymer.html#declarative-event-mapping">Declarative event mapping</a>.</p>

<h2>Desplegando la aplicación</h2>

<p>Antes de desplegar, es necesario el uso de <em>transformadores</em> de Polymer para
completar el proceso. Para ello, modificar <code>pubspec.yaml</code> añadiendo las siguientes
líneas:</p>

<p>```
...
dependencies:
  polymer: ...
transformers:
- polymer:</p>

<pre><code>entry_points: web/index.html
</code></pre>

<p>```</p>

<p>Definiendo <code>entry_points</code> indicamos a Polymer qué ficheros HTML queremos que transforme.</p>

<p>Para probar el Web Component desarrollado podemos seleccionar <em>Ejecutar como JavaScript</em>
sobre el fichero <code>web/index.html</code> desde Dart Editor.</p>

<p>O también, tenemos el comando <code>pub serve</code> en línea de comandos. Este comando nos indicará
una dirección URL donde poder probar la aplicación.</p>

<p>El comando <code>pub build</code> genera ficheros que pueden ser desplegados en un servidor
aparte y que hará posible ejecutar la aplicación en cualquier navegador moderno.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mi primer katayuno]]></title>
    <link href="http://rchavarria.github.io/blog/2014/11/02/mi-primer-katayuno/"/>
    <updated>2014-11-02T01:14:00+01:00</updated>
    <id>http://rchavarria.github.io/blog/2014/11/02/mi-primer-katayuno</id>
    <content type="html"><![CDATA[<p>El pasado 25 de octubre asistí a un <a href="http://katayunos.com">katayuno</a> organizado por <a href="http://aprendiendotdd.com">Aprendiendo TDD</a>.
Esta pequeña reunión tuvo lugar en <a href="http://www.materiagriscoworking.com">MateriaGris Coworking</a>, un espacio de coworking
que ha montado un gran amigo mío.</p>

<p>El katayuno consistía en resolver un sencillísimo problema (el tema no es resolver
un gran problema sino practicar TDD): desarrollar un método que, tomando como parámetros
dos números enteros <code>a</code> y <code>b</code>, devuelva una lista con el doble de todos los números
impares entre ambos. Realizamos dos iteraciones, cada vez haciendo <em>pair programming</em>
con una pareja distinta.</p>

<p>En este post voy a describir cómo fueron mis dos iteraciones, y algo de código <a href="http://dartlang.org">Dart</a> que
he escrito después intentando simularlas, para poder ilustrar todo el proceso.</p>

<!-- more -->


<h2>Iteración 1</h2>

<p>En este primera iteración seguimos unos pasos que a mí me parecían correctos.
Empezamos solucionando los casos más sencillos, como aquellos que el resultado
era una lista vacía por ejemplo, para terminar con los más complicados. Estos
pasos me parecían correctos, quizá porque estoy acostumbrado a resolverlos de
ese modo.</p>

<p>Más tarde, como vimos en la pequeña restrospectiva de la iteración mi pareja
y yo mostramos nuestro código, y criticaron bastante nuestro código, la verdad.
No es nada malo, de hecho, aprendimos bastante y otras parejas nos enseñaron
otro enfoque que me pareció interesante.</p>

<p>Al final de la iteración, nuestro código quedó más o menos así:</p>

<pre><code>class OddDoubler {

    List&lt;int&gt; compute(int a, int b) {
        List&lt;int&gt; list = new List&lt;int&gt;();

        while (a &lt;= b) {
            if (isOdd(a)) {
                list.add(a * 2);
            }
            a++;
        }

        return list;
    }

    boolean isOdd(n) =&gt; n % 2 != 0;
}
</code></pre>

<p>El código completo, incluidos tests:
<a href="https://github.com/rchavarria/katayuno-octubre-2014/blob/master/iteration-1/odd-doubles.dart">iteración 1</a>.</p>

<p>A mí, personalmente, el código de producción me gusta, sencillo y
al grano. Pero para llegar a él, hay un paso,
<a href="https://github.com/rchavarria/katayuno-octubre-2014/commit/135d644fdbe75c5c8d6e17cd8f1461f7eaac67ce">donde introducimos el bucle while</a>
que quizá sea un paso demasiado grande, por lo que quizá los tests
elegidos no sean los más adecuados.</p>

<h2>Iteración 2</h2>

<p>En esta segunda iteración cambiamos de pareja. Y también cambiamos la forma
de atacar el problema. Esta vez, siguiendo los consejos de los compañeros
de la iteración anterior, decidimos resolver el problema avanzando por
estados intermedios. Así que esta vez, no solucionamos el problema
desde los casos más sencillos hasta los más complicados.</p>

<p>Decidimos que los pasos intermedios serían:</p>

<ul>
<li>Decidir si un número is impar o no</li>
<li>Implementar un método que nos diera una lista de todos los números entre
dos números dados</li>
<li>Implementar un método que nos eliminara de una lista los números pares</li>
<li>Implementar un método que multiplicara por 2 todos los elementos de
una lista</li>
</ul>


<p>No llegamos a completarlo del todo, la iteración se nos quedó corta, pero
la idea la implementé más tarde y éste es el resultado de la
segunda iteración:</p>

<pre><code>class OddDoubler {

    boolean isOdd(int n) =&gt; n % 2 != 0;

    List&lt;int&gt; getNumbers(int a, int b) =&gt; new List&lt;int&gt;.generate((b - a + 1), (int index) =&gt; a + index);

    List&lt;int&gt; filterOdds(List&lt;int&gt; numbers) {
        numbers.removeWhere((n) =&gt; !isOdd(n));
        return numbers;
    }

    List&lt;int&gt; doubleNumbers(List&lt;int&gt; numbers) =&gt; numbers.map((n) =&gt; n * 2);

    // This method should be the only public method
    // It resolves the KATA
    List&lt;int&gt; compute(int a, int b) =&gt; doubleNumbers(filterOdds(getNumbers(a, b)));
}
</code></pre>

<p>El código completo, incluidos tests:
<a href="https://github.com/rchavarria/katayuno-octubre-2014/blob/master/iteration-2/odd-doubles.dart">iteración 2</a>.</p>

<p>Me gusta más la aproximación de esta iteración, pero lo que no me gusta
es que hay métodos públicos que en realidad deberían ser privados. Son
públicos porque hemos creado tests para comprobar su funcionamiento, pero
deberían ser privados porque no aportan nada fuera de la implementación
de la clase.</p>

<p>Como todo en el desarrollo del software, toda decisión tiene su parte
buena y su parte no tan buena.</p>

<h2>Conclusión</h2>

<p>Es la primera vez que participo en un evento de este tipo, y espero que no
sea la última. La experiencia me encantó.</p>

<p>Sí, es cierto, en la primera iteración nos dieron bastante caña a mi pareja
y a mí, pero eso nos sirvió para entender que no todas las aproximaciones son
igual de buenas, y que hay que ser humilde para tener la mente abierta y
poder aprender de los demás compañeros.</p>

<p>Este tipo de eventos nos ayudan a ser mejores profesionales, y era mi objetivo
al participar en él. Gracias a <a href="http://aprendiendotdd.com">Aprendiendo TDD</a> y a <a href="http://www.materiagriscoworking.com">MateriaGris Coworking</a>
creo que todos aprendimos algo aquella mañana.</p>

<p>Gracias chicos.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Screencast de programacion: el Juego del disparejo]]></title>
    <link href="http://rchavarria.github.io/blog/2014/10/23/screencast-programacion-juego-disparejo/"/>
    <updated>2014-10-23T00:12:00+02:00</updated>
    <id>http://rchavarria.github.io/blog/2014/10/23/screencast-programacion-juego-disparejo</id>
    <content type="html"><![CDATA[<p>En este post te presento un screencast que he creado mostrándote cómo resuelvo
un problema de programación. Todo empezó viendo los
<a href="http://www.carlosble.com/screencasts/es/">Screencasts de programación de Carlos Blé</a>.
Deberías echarles un vistazo, merecen la pena, en serio.</p>

<p>Me gustaron tanto que me pregunté si podría crear yo algunos. Por aquel tiempo
estaba trasteando con un problema de solveet.com, el <a href="http://www.solveet.com/exercises/Juego-del-disparejo/306">Juego del disparejo</a>.
Así que tenía todo: el gusanillo de crear algo, y un problema sobre el que
trabajar.</p>

<!-- more -->




<iframe src="http://rchavarria.github.io//player.vimeo.com/video/109688257" 
        width="500"
        height="281"
        frameborder="0"
        webkitallowfullscreen mozallowfullscreen allowfullscreen>
</iframe>


<p>El problema lo resuelvo con el lenguaje de programación <a href="http://dartlang.org/">Dart</a>. No por
nada en particular, si no porque lo estoy aprendiendo, y para ello me
da por resolver problemas de programación (donde solveet.com entra en
juego).</p>

<p>El proceso que sigo es el ciclo TDD: red ➭ green ➭ refactor. Para evolucionar
el código y las refactorizaciones, aplico técnicas aprendidas de <a href="http://www.carlosble.com">Carlos</a> y
sus screencasts, así como las <a href="http://blog.8thlight.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html">Transformation Priority Premise</a> del
gran maestro <a href="https://en.wikipedia.org/wiki/Robert_Cecil_Martin">Uncle Bob</a>.</p>
]]></content>
  </entry>
  
</feed>
